<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Writer's War Room</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Optional fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&family=Special+Elite&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div class="app-shell">
    <!-- fake browser chrome -->
    <div class="browser-bar">
      <div class="browser-dots">
        <div class="browser-dot red"></div>
        <div class="browser-dot amber"></div>
        <div class="browser-dot green"></div>
      </div>
      <div class="browser-url">
        <span>https://warroom.writerverse.app/session/03</span>
      </div>
    </div>

    <!-- header -->
    <header class="app-header">
      <div class="app-title-block">
        <div class="app-title">Writer's War Room</div>
        <div class="app-subtitle">campaign command console</div>
      </div>
      <div class="header-indicators">
        <div class="header-pill online">
          <span class="label">User ID</span>
          <span class="value" id="auth-status">Connecting...</span>
        </div>
        <div class="header-pill">
          <span class="label">Word Count</span>
          <span class="value" id="word-count">...</span>
        </div>
      </div>
    </header>

    <!-- Main Panels -->
    <main class="main-content">
      <!-- Draft/Outline Panel -->
      <section class="panel draft-outline">
        <div class="panel-header">
          <div class="panel-title">Siege of the Sunken Tower Draft</div>
          <div class="panel-controls">
            <button class="control-btn active" id="draft-view-btn" data-view="draft">Draft View</button>
            <button class="control-btn" id="outline-view-btn" data-view="outline">Outline View</button>
          </div>
        </div>
        <div class="draft-content-area" id="draft-content-area">
          <pre id="draft-outline-content">Loading Draft content...</pre>
        </div>
      </section>

      <!-- Right Column Panels -->
      <section class="right-column-panels">
        <!-- Status Panel -->
        <section class="panel status-panel">
          <div class="panel-header">
            <div class="panel-title">Campaign Status</div>
          </div>
          <div class="status-grid">
            <div class="status-item active">
              <div class="label">Chapter</div>
              <div class="value">VII (Siege)</div>
            </div>
            <div class="status-item">
              <div class="label">Plot Tension</div>
              <div class="value">92%</div>
            </div>
            <div class="status-item">
              <div class="label">Time in Draft</div>
              <div class="value">00:34:11</div>
            </div>
            <div class="status-item active">
              <div class="label">Goal Status</div>
              <div class="value">~50%</div>
            </div>
          </div>

          <!-- Character Dossier Mockup -->
          <div class="dossier-panel">
            <div class="name">Commander Kael</div>
            <p style="font-size: 13px; color: var(--text-main); line-height: 1.4;">
              Primary protagonist. Morally ambiguous war veteran. Key decision: whether to trust the captured mercenary, Lyra.
            </p>
            <img class="dossier-img" src="Gemini_Generated_Image_ayizr0ayizr0ayiz.jpg-15cce6c2-af3e-46de-9fa0-18073330754c" alt="Commander Kael" onerror="this.onerror=null;this.src='https://placehold.co/400x300/4a5568/ffffff?text=Character+Image';" />
            <div class="key-stat">Conflict Driver: <strong>Loyalty vs. Pragmatism</strong></div>
            <div class="key-stat">Emotional Arc: <strong>Guilt to Acceptance</strong></div>
          </div>
        </section>

        <!-- Asset Library Panel -->
        <section class="panel asset-library">
          <div class="panel-header">
            <div class="panel-title">Asset Library</div>
          </div>
          <div class="asset-controls">
            <button class="control-btn active" id="asset-char-btn" data-asset="characters">Character Models</button>
            <button class="control-btn" id="asset-weapon-btn" data-asset="weapons">Weapon Schematics</button>
            <button class="control-btn" id="asset-location-btn" data-asset="locations">Location Concepts</button>
          </div>
          <div class="asset-content" id="asset-content">
            <!-- Content will be updated by JS -->
            <h4>Commander Kael - Vitals</h4>
            <ul>
              <li><strong>Age:</strong> 45 (Physically 50 due to stress)</li>
              <li><strong>Height:</strong> 6'1" (185 cm)</li>
              <li><strong>Alignment:</strong> Lawful Neutral</li>
              <li><strong>Key Trait:</strong> Obsessive Planner</li>
            </ul>
          </div>
        </section>
      </section>

      <!-- Chat Log Section -->
      <section class="chat-log">
        <div class="chat-messages" id="chat-messages">
          <div class="chat-message">
            <div class="meta">00:07 · System</div>
            <div class="text">New session spun up for Siege Draft iteration.</div>
          </div>
          <div class="chat-message">
            <div class="meta">00:11 · You</div>
            <div class="text">Flagged the harbour scene for stronger motive clarity.</div>
          </div>
          <div class="chat-message">
            <div class="meta">00:19 · Owl</div>
            <div class="text">Reminder: foreshadow betrayal via missing supply crates.</div>
          </div>
          <div class="chat-message">
            <div class="meta">00:23 · You</div>
            <div class="text">Mark Act II midpoint: "Tower breach / first blood on inner wall".</div>
          </div>
        </div>
        <div class="chat-input-container">
          <input type="text" id="chat-input" placeholder="Type message to collaborator or system command (e.g., /status)..." />
          <button id="send-chat-btn">Send</button>
        </div>
      </section>

      <!-- Bottom toolbar (Non-functional, for display) -->
      <footer class="bottom-toolbar">
        <div class="toolbar-buttons">
          <button class="tb-btn">Worldmap View</button>
          <button class="tb-btn">Prompt Console</button>
          <button class="tb-btn">Continuity &amp; Style Check</button>
          <button class="tb-btn secondary">Prompt Convert</button>
          <button class="tb-btn secondary">Snippet Vault</button>
        </div>
        <div class="toolbar-status">
          Draft autosaved · All systems nominal
        </div>
      </footer>
    </main>
  </div>

  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBHo3T6TRjInJ2pBkHNXdMbStY_ec7aRM8",
      authDomain: "writer-s-war-room.firebaseapp.com",
      projectId: "writer-s-war-room",
      storageBucket: "writer-s-war-room.firebasestorage.app",
      messagingSenderId: "827308712794",
      appId: "1:827308712794:web:b11cf4c42bbdf483f9c963"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
  </script>

  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="index.js"></script>
</body>
</html>
